import streamlit as st
from config import Config

class UIComponents:
    def __init__(self):
        self.config = Config()
    
    def render_header(self):
        # ì•± í—¤ë”ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
        st.title(Config.APP_TITLE)
        st.markdown("---")
        st.write("ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì„ ì…ë ¥í•˜ë©´ êµ¬í˜„ ì „ í™•ì¸ì´ í•„ìš”í•œ ì‚¬í•­ë“¤ì„ ë¶„ì„í•˜ê³  ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.")
    
    def render_input_section(self):
        # ì…ë ¥ ì„¹ì…˜ì„ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
        col1, col2 = st.columns([3, 1])
        
        with col1:
            st.header("ğŸ“ ìš”êµ¬ì‚¬í•­ ì…ë ¥")
            requirement_input = st.text_area(
                "ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”:",
                height=200,
                placeholder="ì˜ˆì‹œ: ì±—ë´‡ ë§í¬ë¥¼ ë©”ì¸ í™”ë©´ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.\nì˜ˆì‹œ: ê³„ì•½ê¸ˆì•¡ì´ êµ¬ë§¤ìš”ì²­ ê¸ˆì•¡ì„ ë„˜ì–´ê°€ì§€ ì•Šê²Œ í•´ì£¼ì„¸ìš”.\nì˜ˆì‹œ: ì—‘ì…€ ì—…ë¡œë“œ ì‹œ ì¤‘ë³µ ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ì œê±°í•´ì£¼ì„¸ìš”.",
                help="êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ê¸°ëŠ¥ì´ë‚˜ ë³€ê²½ì‚¬í•­ì„ êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.",
                max_chars=Config.MAX_TEXT_LENGTH
            )
            
            # ê¸€ì ìˆ˜ í‘œì‹œ
            if requirement_input:
                char_count = len(requirement_input)
                st.caption(f"ì…ë ¥ëœ ê¸€ì ìˆ˜: {char_count}/{Config.MAX_TEXT_LENGTH}")
        
        with col2:
            st.header("âš¡ ë¶„ì„ ì˜µì…˜")
            analysis_type = st.selectbox(
                "ë¶„ì„ ìœ í˜•:",
                ["ê¸°ë³¸ ë¶„ì„", "ìƒì„¸ ë¶„ì„"],
                help="ìƒì„¸ ë¶„ì„ì€ ë” ë§ì€ í™•ì¸ì‚¬í•­ì„ ë„ì¶œí•©ë‹ˆë‹¤."
            )
            
            priority_level = st.selectbox(
                "ìš°ì„ ìˆœìœ„ ìˆ˜ì¤€:",
                ["ë†’ìŒ", "ë³´í†µ", "ë‚®ìŒ"],
                index=1,
                help="ì²´í¬ë¦¬ìŠ¤íŠ¸ì˜ ìƒì„¸ë„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤."
            )
            
            # ì§‘ì¤‘ ë¶„ì„ ì˜ì—­
            st.subheader("ğŸ¯ ì§‘ì¤‘ ë¶„ì„ ì˜ì—­")
            focus_areas = []
            
            col2_1, col2_2 = st.columns(2)
            with col2_1:
                if st.checkbox("UI/UX", value=True):
                    focus_areas.append("UI/UX")
                if st.checkbox("ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§", value=True):
                    focus_areas.append("ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§")
                if st.checkbox("ë°ì´í„° ì²˜ë¦¬"):
                    focus_areas.append("ë°ì´í„° ì²˜ë¦¬")
            
            with col2_2:
                if st.checkbox("ê¶Œí•œ ê´€ë¦¬"):
                    focus_areas.append("ê¶Œí•œ ê´€ë¦¬")
                if st.checkbox("ì„±ëŠ¥"):
                    focus_areas.append("ì„±ëŠ¥")
                if st.checkbox("ë³´ì•ˆ"):
                    focus_areas.append("ë³´ì•ˆ")
        
        return requirement_input, analysis_type, priority_level, focus_areas
    
    def render_analysis_button(self, requirement_input):
        # ë¶„ì„ ë²„íŠ¼ì„ ë Œë”ë§í•˜ê³  ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜
        if st.button("ğŸ” ìš”êµ¬ì‚¬í•­ ë¶„ì„í•˜ê¸°", type="primary", use_container_width=True):
            # ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬
            if not requirement_input.strip():
                st.error("ìš”êµ¬ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                return False
            
            if len(requirement_input.strip()) < 5:
                st.error("ìš”êµ¬ì‚¬í•­ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”. (ìµœì†Œ 5ì)")
                return False
            
            return True
        
        return False
    
    def render_examples(self):
        # ì‚¬ìš© ì˜ˆì‹œë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
        with st.expander("ğŸ’¡ ì‚¬ìš© ì˜ˆì‹œ ë³´ê¸°"):
            tab1, tab2, tab3, tab4 = st.tabs(["UI ê¸°ëŠ¥", "ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™", "ë°ì´í„° ì²˜ë¦¬", "ì‹œìŠ¤í…œ ì—°ë™"])
            
            with tab1:
                st.markdown("""
                **UI ê¸°ëŠ¥ ì¶”ê°€ ì˜ˆì‹œ:**
                ```
                ì±—ë´‡ ë§í¬ë¥¼ ë©”ì¸ í™”ë©´ì— ì¶”ê°€í•´ì£¼ì„¸ìš”
                ```
                
                **ë¶„ì„ ê²°ê³¼ ì˜ˆì‹œ:**
                - ë©”ì¸ í™”ë©´ì˜ ì–´ëŠ ìœ„ì¹˜ì— ì¶”ê°€í• ì§€?
                - ë§í¬ í´ë¦­ì‹œ ë™ì‘ ë°©ì‹ì€? (íŒì—…/ìƒˆì°½/ë¦¬ë‹¤ì´ë ‰ì…˜)
                - ì•„ì´ì½˜ ë””ìì¸ì€ ì–¸ì œ ì œê³µ ê°€ëŠ¥í•œì§€?
                - ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œí• ì§€, ê¶Œí•œë³„ ì œì–´ê°€ í•„ìš”í•œì§€?
                """)
            
            with tab2:
                st.markdown("""
                **ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ë³€ê²½ ì˜ˆì‹œ:**
                ```
                ê³„ì•½ê¸ˆì•¡ì´ êµ¬ë§¤ìš”ì²­ ê¸ˆì•¡ì„ ë„˜ì–´ê°€ì§€ ì•Šê²Œ í•´ì£¼ì„¸ìš”
                ```
                
                **ë¶„ì„ ê²°ê³¼ ì˜ˆì‹œ:**
                - ëª¨ë“  ê³„ì•½ ìœ í˜•ì— ì ìš©í•˜ëŠ”ì§€? (ë¬¼ì/ê³µì‚¬/ìš©ì—­)
                - ê¸°ì¡´ ì§„í–‰ì¤‘ì¸ ê³„ì•½ë„ í¬í•¨í•˜ëŠ”ì§€?
                - í•œë„ ì´ˆê³¼ì‹œ ì²˜ë¦¬ ë°©ì‹ì€? (ê²½ê³ /ì°¨ë‹¨)
                - ì˜ˆì™¸ ìƒí™©ì´ë‚˜ íŠ¹ë³„ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ìˆëŠ”ì§€?
                """)
            
            with tab3:
                st.markdown("""
                **ë°ì´í„° ì²˜ë¦¬ ì˜ˆì‹œ:**
                ```
                ì—‘ì…€ ì—…ë¡œë“œ ì‹œ ì¤‘ë³µ ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ì œê±°í•´ì£¼ì„¸ìš”
                ```
                
                **ë¶„ì„ ê²°ê³¼ ì˜ˆì‹œ:**
                - ì¤‘ë³µ íŒë‹¨ ê¸°ì¤€ì€? (ì „ì²´ í–‰/íŠ¹ì • ì»¬ëŸ¼)
                - ì¤‘ë³µ ë°œê²¬ì‹œ ì²˜ë¦¬ ë°©ë²•ì€? (ì²«ë²ˆì§¸ ìœ ì§€/ë§ˆì§€ë§‰ ìœ ì§€/ì‚¬ìš©ì ì„ íƒ)
                - ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ì œê³µí• ì§€?
                - ì œê±°ëœ ë°ì´í„°ì˜ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ì§€?
                """)
            
            with tab4:
                st.markdown("""
                **ì‹œìŠ¤í…œ ì—°ë™ ì˜ˆì‹œ:**
                ```
                ê²°ì¬ ì™„ë£Œ ì‹œ ìë™ìœ¼ë¡œ íšŒê³„ì‹œìŠ¤í…œì— ì „ì†¡í•´ì£¼ì„¸ìš”
                ```
                
                **ë¶„ì„ ê²°ê³¼ ì˜ˆì‹œ:**
                - ì–´ë–¤ ê²°ì¬ ìœ í˜•ì— ì ìš©í•˜ëŠ”ì§€?
                - ì „ì†¡ ì‹¤íŒ¨ì‹œ ì¬ì‹œë„ ë¡œì§ì€?
                - íšŒê³„ì‹œìŠ¤í…œ ì ê²€ ì¤‘ì¼ ë•Œ ì²˜ë¦¬ëŠ”?
                - ì „ì†¡ ì™„ë£Œ í™•ì¸ ë°©ë²•ì€?
                """)
    
    def render_tips(self):
        # ì‚¬ìš© íŒì„ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
        with st.expander("ğŸ“š íš¨ê³¼ì ì¸ ìš”êµ¬ì‚¬í•­ ì‘ì„± íŒ"):
            st.markdown("""
            **ëª…í™•í•œ ìš”êµ¬ì‚¬í•­ ì‘ì„±ì„ ìœ„í•œ ê°€ì´ë“œ:**
            
            âœ… **ì¢‹ì€ ì˜ˆì‹œ:**
            - "ë¡œê·¸ì¸ í™”ë©´ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ë²„íŠ¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”"
            - "ì›”ë³„ ë§¤ì¶œ ë³´ê³ ì„œì— ì „ë…„ ëŒ€ë¹„ ì¦ê°ë¥  ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”"
            - "ê³„ì•½ì„œ ìŠ¹ì¸ ì‹œ ìë™ìœ¼ë¡œ ë‹´ë‹¹ìì—ê²Œ ì´ë©”ì¼ ì•Œë¦¼ì„ ë³´ë‚´ì£¼ì„¸ìš”"
            
            âŒ **ëª¨í˜¸í•œ ì˜ˆì‹œ:**
            - "ì‹œìŠ¤í…œì„ ê°œì„ í•´ì£¼ì„¸ìš”"
            - "ë” í¸ë¦¬í•˜ê²Œ ë§Œë“¤ì–´ì£¼ì„¸ìš”"
            - "ë³´ê³ ì„œë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”"
            
            **í¬í•¨í•˜ë©´ ì¢‹ì€ ì •ë³´:**
            - êµ¬ì²´ì ì¸ í™”ë©´ì´ë‚˜ ê¸°ëŠ¥ëª…
            - ì˜ˆìƒë˜ëŠ” ì‚¬ìš©ì ê·¸ë£¹
            - ì›í•˜ëŠ” ë™ì‘ ë°©ì‹
            - ê¸°ëŒ€í•˜ëŠ” ê²°ê³¼
            """)
    
    def render_footer(self):
        # í‘¸í„°ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
        st.markdown("---")
        st.markdown(
            """
            <div style='text-align: center; color: #666; padding: 20px;'>
                <small>
                    ğŸ’¡ ì´ ë„êµ¬ëŠ” ìš”êµ¬ì‚¬í•­ ë¶„ì„ì„ ë„ì™€ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.<br>
                </small>
            </div>
            """, 
            unsafe_allow_html=True
        )
    
    def show_loading_message(self, message="ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤..."):
        # ë¡œë”© ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        return st.spinner(message)
    
    def show_success_message(self, message):
        # ì„±ê³µ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        st.success(message)
    
    def show_error_message(self, message):
        # ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        st.error(message)
    
    def show_warning_message(self, message):
        # ê²½ê³  ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        st.warning(message)